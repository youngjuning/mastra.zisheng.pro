---
order: 3
title: OpenAI API
description: 'å¤§è¯­è¨€æ¨¡å‹æ˜¯ä¸“é—¨ç”¨äºç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œå®ƒçš„è¾“å…¥å’Œè¾“å‡ºä»…é™äºæ–‡æœ¬ï¼ˆtoken åºåˆ—ï¼‰ã€‚ '
keywords: [å¤§è¯­è¨€æ¨¡å‹, OpenAI, å¤§æ¨¡å‹, AI, Agents]
toc: content
---

## client.chat.completions.crate

### å…¥å‚

| å‚æ•°                | ç±»å‹                    | å¿…å¡« | é»˜è®¤å€¼         | è¯´æ˜                                                      |
| ------------------- | ----------------------- | ---- | -------------- | --------------------------------------------------------- |
| `model`             | string                  | âœ… æ˜¯ | â€”              | æ¨¡å‹ IDï¼Œå¦‚ `"gpt-4o"`, `"qwen-plus"`, `"deepseek-chat"`  |
| `messages`          | `Array<Message>`         | âœ… æ˜¯ | â€”              | **å¯¹è¯å†å²åˆ—è¡¨**ï¼ŒæŒ‰æ—¶é—´é¡ºåºæ’åˆ—                          |
| `frequency_penalty` | number                  | âŒ å¦ | `0`            | [-2, 2]ï¼Œå€¼è¶Šé«˜è¶ŠæŠ‘åˆ¶é‡å¤è¯                               |
| `logit_bias`        | object                  | âŒ å¦ | `null`         | è°ƒæ•´ç‰¹å®š token çš„ç”Ÿæˆæ¦‚ç‡ï¼ˆtoken ID â†’ bias å€¼ï¼‰           |
| `logprobs`          | boolean                 | âŒ å¦ | `false`        | æ˜¯å¦è¿”å›è¾“å‡º token çš„ log æ¦‚ç‡                            |
| `top_logprobs`      | integer                 | âŒ å¦ | â€”              | è‹¥ `logprobs=true`ï¼Œè¿”å›æ¯ä¸ªä½ç½® top N token æ¦‚ç‡ï¼ˆ1~20ï¼‰ |
| `max_tokens`        | integer                 | âŒ å¦ | æ¨¡å‹æœ€å¤§ä¸Šä¸‹æ–‡ | é™åˆ¶**ç”Ÿæˆ**çš„æœ€å¤§ token æ•°ï¼ˆä¸å«è¾“å…¥ï¼‰                   |
| `n`                 | integer                 | âŒ å¦ | `1`            | è¿”å›å¤šå°‘ä¸ªç‹¬ç«‹ completion ç»“æœï¼ˆ1~128ï¼‰                   |
| `presence_penalty`  | number                  | âŒ å¦ | `0`            | [-2, 2]ï¼Œå€¼è¶Šé«˜è¶Šé¼“åŠ±æ–°è¯é¢˜                               |
| `response_format`   | object                  | âŒ å¦ | â€”              | å¼ºåˆ¶è¾“å‡ºæ ¼å¼                                              |
| `seed`              | integer                 | âŒ å¦ | `null`         | éšæœºç§å­ï¼Œç”¨äºç¡®å®šæ€§è¾“å‡ºï¼ˆéƒ¨åˆ†æ¨¡å‹æ”¯æŒï¼‰                  |
| `stop`              | string \| Array<string> | âŒ å¦ | `null`         | é‡åˆ°è¿™äº›å­—ç¬¦ä¸²ç«‹å³åœæ­¢ç”Ÿæˆ                                |
| `stream`            | boolean                 | âŒ å¦ | `false`        | æ˜¯å¦å¯ç”¨æµå¼å“åº”ï¼ˆé€ token è¿”å›ï¼‰                         |
| `stream_options`    | object                  | âŒ å¦ | â€”              | æµå¼é€‰é¡¹ï¼ˆè§ä¸‹è¡¨ï¼‰                                        |
| `temperature`       | number                  | âŒ å¦ | `1`            | `[0, 2]`ï¼Œæ§åˆ¶éšæœºæ€§ï¼ˆ0=ç¡®å®šï¼Œ1=é»˜è®¤ï¼Œ2=é«˜åˆ›æ„ï¼‰          |
| `top_p`             | number                  | âŒ å¦ | `1`            | `[0,1]`ï¼Œæ ¸é‡‡æ ·æ¦‚ç‡é˜ˆå€¼ï¼ˆä¸ `temperature` äºŒé€‰ä¸€ï¼‰        |
| `tools`             | `Array<Tool>`             | âŒ å¦ | â€”              | å®šä¹‰å¯è°ƒç”¨çš„å‡½æ•°å·¥å…·ï¼ˆè§ä¸‹è¡¨é€’å½’ï¼‰                        |
| `tool_choice`       | string \| object        | âŒ å¦ | `"auto"`       | æ§åˆ¶æ˜¯å¦/å¦‚ä½•è°ƒç”¨å·¥å…·                                     |
| `user`              | string                  | âŒ å¦ | â€”              | ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼ˆç”¨äºæ»¥ç”¨ç›‘æ§ï¼Œéå¿…éœ€ï¼‰                      |

#### Message å¯¹è±¡

| å­—æ®µ           | ç±»å‹                                 | å¿…å¡« | è¯´æ˜                                                   |
| -------------- | ------------------------------------ | ---- | ------------------------------------------------------ |
| `role`         | string                               | âœ…    | è§’è‰²ï¼š`"system"` / `"user"` / `"assistant"` / `"tool"` |
| `content`      | string \| null \| `Array<ContentPart>` | âœ…    | æ–‡æœ¬å†…å®¹ï¼Œæˆ–å¤šåª’ä½“å†…å®¹åˆ—è¡¨ï¼ˆå¤šæ¨¡æ€æ¨¡å‹ï¼‰               |
| `name`         | string                               | âŒ    | ï¼ˆä»… `role="tool"`ï¼‰å·¥å…·åç§°                           |
| `tool_call_id` | string                               | âŒ    | ï¼ˆä»… `role="tool"`ï¼‰å¯¹åº” tool call ID                  |
| `tool_calls`   | `Array<ToolCall>`                      | âŒ    | ï¼ˆä»… `role="assistant"`ï¼‰æ¨¡å‹è¯·æ±‚çš„å·¥å…·è°ƒç”¨            |

#### `ContentPart`ï¼ˆå¤šæ¨¡æ€è¾“å…¥ï¼Œå¦‚ GPT-4o/Qwen-VLï¼‰

| å­—æ®µ        | ç±»å‹   | è¯´æ˜                              |
| ----------- | ------ | --------------------------------- |
| `type`      | string | `"text"` æˆ– `"image_url"`         |
| `text`      | string | ï¼ˆå½“ `type="text"`ï¼‰æ–‡æœ¬å†…å®¹      |
| `image_url` | object | ï¼ˆå½“ `type="image_url"`ï¼‰å›¾ç‰‡ä¿¡æ¯ |

#### `image_url`

| å­—æ®µ     | ç±»å‹   | è¯´æ˜                                         |
| -------- | ------ | -------------------------------------------- |
| `url`    | string | å›¾ç‰‡ URLï¼ˆæ”¯æŒ base64ï¼‰                      |
| `detail` | string | `"low"` / `"high"` / `"auto"`ï¼ˆGPT-4o ç‰¹æœ‰ï¼‰ |

#### `ToolCall`

| å­—æ®µ       | ç±»å‹         | è¯´æ˜             |
| ---------- | ------------ | ---------------- |
| `id`       | string       | å·¥å…·è°ƒç”¨å”¯ä¸€ ID  |
| `type`     | `"function"` | å›ºå®šå€¼           |
| `function` | object       | å‡½æ•°ä¿¡æ¯ï¼ˆè§ä¸‹ï¼‰ |

##### `function`ï¼ˆåœ¨ `tool_calls` ä¸­ï¼‰

| å­—æ®µ        | ç±»å‹   | è¯´æ˜                  |
| ----------- | ------ | --------------------- |
| `name`      | string | å‡½æ•°å                |
| `arguments` | string | JSON å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå‚æ•° |

#### `tools` ä¸­çš„ `Tool`

| å­—æ®µ       | ç±»å‹   | è¯´æ˜                |
| ---------- | ------ | ------------------- |
| `type`     | string | å›ºå®šä¸º `"function"` |
| `function` | object | å‡½æ•°å®šä¹‰            |

#### `tools` ä¸­çš„`function`

| å­—æ®µ          | ç±»å‹   | å¿…å¡« | è¯´æ˜                          |
| ------------- | ------ | ---- | ----------------------------- |
| `name`        | string | âœ…    | å‡½æ•°åï¼ˆå­—æ¯/ä¸‹åˆ’çº¿ï¼Œæ— ç©ºæ ¼ï¼‰ |
| `description` | string | âŒ    | å‡½æ•°æè¿°ï¼ˆå¸®åŠ©æ¨¡å‹ç†è§£ç”¨é€”ï¼‰  |
| `parameters`  | object | âœ…    | JSON Schema æ ¼å¼çš„å‚æ•°å®šä¹‰    |

:::info

ğŸ’¡ `parameters` éµå¾ª JSON Schema è§„èŒƒï¼Œä¾‹å¦‚ï¼š

```json
{
  "type": "object",
  "properties": {
    "location": { "type": "string", "description": "åŸå¸‚å" }
  },
  "required": ["location"]
}
```

:::

#### `tool_choice`

| ç±»å‹   | ç¤ºä¾‹                                                         | è¯´æ˜             |
| ------ | ------------------------------------------------------------ | ---------------- |
| string | `"none"` / `"auto"` / `"required"`                           | æ§åˆ¶æ˜¯å¦è°ƒç”¨å·¥å…· |
| object | `{ "type": "function", "function": { "name": "get_weather" } }` | å¼ºåˆ¶è°ƒç”¨æŒ‡å®šå‡½æ•° |

#### `response_format`

| å­—æ®µ          | ç±»å‹                       | å¿…å¡« | è¯´æ˜                             |
| ------------- | -------------------------- | ---- | -------------------------------- |
| `type`        | `"text"` | `"json_object"` | âœ…    | è¾“å‡ºæ ¼å¼ç±»å‹                     |
| `json_schema` | object                     | âŒ    | ï¼ˆéƒ¨åˆ†å¹³å°æ”¯æŒï¼‰JSON Schema å®šä¹‰ |

#### `stream_options`

| å­—æ®µ            | ç±»å‹    | è¯´æ˜                     |
| --------------- | ------- | ------------------------ |
| `include_usage` | boolean | æ˜¯å¦åœ¨æµç»“æŸæ—¶è¿”å› usage |

### éæµå¼å“åº”

è°ƒç”¨æˆåŠŸåè¿”å›çš„å¯¹è±¡ç»“æ„ï¼ˆä»¥éæµå¼ `stream=false` ä¸ºä¾‹ï¼‰ã€‚

| å­—æ®µ                 | ç±»å‹          | è¯´æ˜                                |
| -------------------- | ------------- | ----------------------------------- |
| `id`                 | string        | è¯·æ±‚å”¯ä¸€ IDï¼ˆå¦‚ `chatcmpl-abc123`ï¼‰ |
| `object`             | string        | å›ºå®šä¸º `"chat.completion"`          |
| `created`            | integer       | Unix æ—¶é—´æˆ³ï¼ˆç§’ï¼‰                   |
| `model`              | string        | å®é™…ä½¿ç”¨çš„æ¨¡å‹ ID                   |
| `choices`            | `Array<Choice>` | ç”Ÿæˆç»“æœåˆ—è¡¨ï¼ˆé•¿åº¦ = `n`ï¼‰          |
| `usage`              | Usage         | token æ¶ˆè€—ç»Ÿè®¡                      |
| `system_fingerprint` | string        | æ¨¡å‹é…ç½®æŒ‡çº¹ï¼ˆOpenAI ç‰¹æœ‰ï¼‰         |

#### `choices` â†’ `Choice`

| å­—æ®µ            | ç±»å‹           | è¯´æ˜                                                         |
| --------------- | -------------- | ------------------------------------------------------------ |
| `index`         | integer        | ç»“æœåºå·ï¼ˆ0 ~ n-1ï¼‰                                          |
| `message`       | Message        | ç”Ÿæˆçš„æ¶ˆæ¯ï¼ˆç»“æ„åŒå…¥å‚ `messages` å…ƒç´ ï¼‰                     |
| `logprobs`      | object \| null | token æ¦‚ç‡ä¿¡æ¯ï¼ˆè‹¥è¯·æ±‚ä¸­ `logprobs=true`ï¼‰                   |
| `finish_reason` | string         | ç»“æŸåŸå› ï¼š `"stop"`ï¼ˆæ­£å¸¸ç»“æŸï¼‰ã€ `"length"`ï¼ˆè¾¾åˆ° `max_tokens`ï¼‰ã€ `"tool_calls"`ï¼ˆéœ€è°ƒç”¨å·¥å…·ï¼‰ã€ `"content_filter"`ï¼ˆå†…å®¹è¢«è¿‡æ»¤ï¼‰ |

ğŸ’¡ `message` ç»“æ„ä¸å…¥å‚ä¸­çš„ `Message` å®Œå…¨ä¸€è‡´ï¼Œå¯èƒ½åŒ…å« `tool_calls`ã€‚

#### `usage`

| å­—æ®µ                | ç±»å‹    | è¯´æ˜                                |
| ------------------- | ------- | ----------------------------------- |
| `prompt_tokens`     | integer | è¾“å…¥ï¼ˆpromptï¼‰æ¶ˆè€—çš„ token æ•°       |
| `completion_tokens` | integer | è¾“å‡ºï¼ˆcompletionï¼‰æ¶ˆè€—çš„ token æ•°   |
| `total_tokens`      | integer | `prompt_tokens + completion_tokens` |

### æµå¼å“åº”

æ¯ä¸ª chunk æ˜¯ä¸€ä¸ª `ChatCompletionChunk` å¯¹è±¡ï¼Œç»“æ„å¦‚ä¸‹ï¼š

| å­—æ®µ      | ç±»å‹               | è¯´æ˜                               |
| --------- | ------------------ | ---------------------------------- |
| `id`      | string             | åŒ `id`                            |
| `object`  | string             | `"chat.completion.chunk"`          |
| `created` | integer            |                                    |
| `model`   | string             |                                    |
| `choices` | `Array<ChunkChoice>` | æµå¼ç‰‡æ®µï¼ˆé€šå¸¸ `n=1`ï¼Œæ‰€ä»¥é•¿åº¦=1ï¼‰ |

#### `ChunkChoice`

| å­—æ®µ            | ç±»å‹           | è¯´æ˜                   |
| --------------- | -------------- | ---------------------- |
| `index`         | integer        | åºå·                   |
| `delta`         | Delta          | **å¢é‡å†…å®¹**ï¼ˆè§ä¸‹ï¼‰   |
| `finish_reason` | string \| null | ä»…åœ¨æœ€å chunk é null |

#### `Delta`

| å­—æ®µ         | ç±»å‹                         | è¯´æ˜                                      |
| ------------ | ---------------------------- | ----------------------------------------- |
| `role`       | string                       | ä»…åœ¨ç¬¬ä¸€ä¸ª chunk å‡ºç°ï¼ˆå¦‚ `"assistant"`ï¼‰ |
| `content`    | string \| null               | æ–°å¢çš„æ–‡æœ¬ç‰‡æ®µï¼ˆå¯èƒ½ä¸º `null`ï¼‰           |
| `tool_calls` | `Array<ToolCallDelta>` \| null | å·¥å…·è°ƒç”¨å¢é‡ï¼ˆç»“æ„ç±»ä¼¼ `ToolCall`ï¼‰       |

> æœ€ç»ˆå®Œæ•´æ¶ˆæ¯éœ€**æ‹¼æ¥æ‰€æœ‰ `delta.content`**ã€‚

### æ€»ç»“

- **å…¥å‚**ï¼šä½ å‘Šè¯‰æ¨¡å‹â€œ**åšä»€ä¹ˆ**â€ï¼ˆå¯¹è¯å†å²ã€çº¦æŸã€å·¥å…·ç­‰ï¼‰
- **å‡ºå‚**ï¼šæ¨¡å‹å‘Šè¯‰ä½ â€œ**ç»“æœæ˜¯ä»€ä¹ˆ**â€ï¼ˆå›ç­”ã€token æ¶ˆè€—ã€æ˜¯å¦éœ€è°ƒç”¨å·¥å…·ç­‰ï¼‰
